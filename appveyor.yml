######## RELEASE CONFIGURATION ########
-
  branches:
    only:
    #- master
    - feature/support-release-in-build-script
  
  version: 1.0.0.{build}
  configuration: Release
  platform: Any CPU

  before_build:
    - nuget restore

  build:
    project: AlexPovar.ResharperTweaks.sln
    verbosity: minimal
  
  after_build:
    - nuget pack AlexPovar.ResharperTweaks.nuspec -Version %APPVEYOR_BUILD_VERSION% -BasePath AlexPovar.ResharperTweaks\bin\Release
  
#  test:
#    assemblies:
#      - AlexPovar.ResharperTweaks.Tests.dll
  test: off

  artifacts:
    - path: '*.nupkg'
    
  assembly_info:
    patch: true
    file: AlexPovar.ResharperTweaks\Properties\AssemblyInfo.cs
    assembly_version: '{version}'
    assembly_file_version: '{version}'
    assembly_informational_version: '{version}'
    
  deploy:
    release: AlexPovar.ResharperTweaks %APPVEYOR_REPO_TAG_NAME%
    description: >
      ### Release notes:
        - XXX
    provider: GitHub
    auth_token:
      secure: OzVU+dQH6Xnhe6lBhEjUsJNTfKHQCT22+khHIBi2zRMelT+UzW1rCgGunZtAlBWP
    artifact: /.*\.nupkg/
    draft: true
    prerelease: false
    on:
      #branch: master
      appveyor_repo_tag: true        # deploy on tag push only   
      
######## DEBUG BUILD ########
-
  version: 1.0.0.{build}
  configuration: Debug
  platform: Any CPU
  
  before_build:
    - nuget restore
    
  build:
    project: AlexPovar.ResharperTweaks.sln
    verbosity: minimal
    
  after_build:
    - nuget pack AlexPovar.ResharperTweaks.nuspec -Version %APPVEYOR_BUILD_VERSION% -BasePath AlexPovar.ResharperTweaks\bin\Debug
    
  test: off
  
  artifacts:
    - path: '*.nupkg'